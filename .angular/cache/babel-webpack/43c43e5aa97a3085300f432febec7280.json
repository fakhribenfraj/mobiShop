{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/fbenfraj/Desktop/Home/tekup/angular/mniProjet/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class CartService {\n  constructor(http) {\n    this.http = http;\n    this.items = [];\n    this.carts = [];\n    this.cart = {\n      id: 0,\n      userId: 0,\n      products: [// { product: { description: \"\", id: 0, name: \"\", price: 0 }, amount: 0 },\n      ],\n      totalPrice: 0,\n      totalProducts: 0\n    };\n  }\n\n  addToCart(product) {\n    let item = this.cart.products.find(item => product.id === item.product.id);\n\n    if (item) {\n      item.amount++;\n    } else {\n      this.cart.products.push({\n        product: product,\n        amount: 1\n      });\n    }\n\n    this.cart.totalPrice += product.price;\n    this.cart.totalProducts++;\n  }\n\n  getCart() {\n    return this.cart;\n  }\n\n  getCartAmount() {\n    return this.cart.totalProducts;\n  }\n\n  getProducts() {\n    return this.cart.products;\n  }\n\n  clearCart() {\n    this.cart.products = [];\n    this.cart.totalProducts = 0;\n    return this.cart.products;\n  }\n\n  getShippingPrices() {\n    return this.http.get(\"https://miniprojet-d7f08-default-rtdb.europe-west1.firebasedatabase.app/shipping.json\");\n  }\n\n  getCarts() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      yield _this.http.get(\"https://miniprojet-d7f08-default-rtdb.europe-west1.firebasedatabase.app/carts.json\").subscribe(res => {\n        _this.carts = res;\n      });\n      return _this.carts;\n    })();\n  }\n\n  submitCart(id) {\n    this.cart.id++;\n    this.cart.userId = id;\n    this.carts.push(this.cart);\n    return this.http.put(\"https://miniprojet-d7f08-default-rtdb.europe-west1.firebasedatabase.app/carts.json\", this.carts).subscribe(response => {\n      console.log(response);\n    });\n  }\n\n}\n\nCartService.ɵfac = function CartService_Factory(t) {\n  return new (t || CartService)(i0.ɵɵinject(i1.HttpClient));\n};\n\nCartService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: CartService,\n  factory: CartService.ɵfac,\n  providedIn: \"root\"\n});","map":{"version":3,"sources":["C:/Users/fbenfraj/Desktop/Home/tekup/angular/mniProjet/src/app/services/cart.service.ts"],"names":["i0","i1","CartService","constructor","http","items","carts","cart","id","userId","products","totalPrice","totalProducts","addToCart","product","item","find","amount","push","price","getCart","getCartAmount","getProducts","clearCart","getShippingPrices","get","getCarts","subscribe","res","submitCart","put","response","console","log","ɵfac","CartService_Factory","t","ɵɵinject","HttpClient","ɵprov","ɵɵdefineInjectable","token","factory","providedIn"],"mappings":"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","sourcesContent":["import * as i0 from \"@angular/core\";\r\nimport * as i1 from \"@angular/common/http\";\r\nexport class CartService {\r\n    constructor(http) {\r\n        this.http = http;\r\n        this.items = [];\r\n        this.carts = [];\r\n        this.cart = {\r\n            id: 0,\r\n            userId: 0,\r\n            products: [\r\n            // { product: { description: \"\", id: 0, name: \"\", price: 0 }, amount: 0 },\r\n            ],\r\n            totalPrice: 0,\r\n            totalProducts: 0,\r\n        };\r\n    }\r\n    addToCart(product) {\r\n        let item = this.cart.products.find((item) => product.id === item.product.id);\r\n        if (item) {\r\n            item.amount++;\r\n        }\r\n        else {\r\n            this.cart.products.push({ product: product, amount: 1 });\r\n        }\r\n        this.cart.totalPrice += product.price;\r\n        this.cart.totalProducts++;\r\n    }\r\n    getCart() {\r\n        return this.cart;\r\n    }\r\n    getCartAmount() {\r\n        return this.cart.totalProducts;\r\n    }\r\n    getProducts() {\r\n        return this.cart.products;\r\n    }\r\n    clearCart() {\r\n        this.cart.products = [];\r\n        this.cart.totalProducts = 0;\r\n        return this.cart.products;\r\n    }\r\n    getShippingPrices() {\r\n        return this.http.get(\"https://miniprojet-d7f08-default-rtdb.europe-west1.firebasedatabase.app/shipping.json\");\r\n    }\r\n    async getCarts() {\r\n        await this.http\r\n            .get(\"https://miniprojet-d7f08-default-rtdb.europe-west1.firebasedatabase.app/carts.json\")\r\n            .subscribe((res) => {\r\n            this.carts = res;\r\n        });\r\n        return this.carts;\r\n    }\r\n    submitCart(id) {\r\n        this.cart.id++;\r\n        this.cart.userId = id;\r\n        this.carts.push(this.cart);\r\n        return this.http\r\n            .put(\"https://miniprojet-d7f08-default-rtdb.europe-west1.firebasedatabase.app/carts.json\", this.carts)\r\n            .subscribe((response) => {\r\n            console.log(response);\r\n        });\r\n    }\r\n}\r\nCartService.ɵfac = function CartService_Factory(t) { return new (t || CartService)(i0.ɵɵinject(i1.HttpClient)); };\r\nCartService.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: CartService, factory: CartService.ɵfac, providedIn: \"root\" });\r\n"]},"metadata":{},"sourceType":"module"}